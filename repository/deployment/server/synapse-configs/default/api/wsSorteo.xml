<?xml version="1.0" encoding="UTF-8"?><api xmlns="http://ws.apache.org/ns/synapse" name="wsSorteo" context="/wsSorteoFovissste">
    <resource methods="POST" url-mapping="/altaOtorgamientoPuntuaje">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:altaOtorgamientoPuntuaje xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_KEY&gt;{payload.claveSorteo}&lt;/dat:P_KEY&gt;         &lt;dat:P_DESCRIPTION&gt;{payload.descripcionSorteo}&lt;/dat:P_DESCRIPTION&gt;         &lt;dat:P_YEAR&gt;{payload.anio}&lt;/dat:P_YEAR&gt;         &lt;dat:P_NUMBER&gt;{payload.numero}&lt;/dat:P_NUMBER&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_CREDIT_NUMBER&gt;{payload.numeroCreditos}&lt;/dat:P_CREDIT_NUMBER&gt;      &lt;/dat:altaOtorgamientoPuntuaje&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:altaOtorgamientoPuntuaje"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="POST" url-mapping="/consultaHomonimias">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:consultaHomonimias xmlns:dat="http://ws.wso2.org/dataservice"&gt;                   &lt;dat:P_ACTIVE_DRAW_ID&gt;{payload.depuracionId}&lt;/dat:P_ACTIVE_DRAW_ID&gt;&lt;/dat:consultaHomonimias&gt;;print(payload.rfc);if(typeof(payload.rfc) !== 'undefined'){     var rfcXml = &lt;dat:P_RFC xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.rfc}&lt;/dat:P_RFC&gt;;    newPayload.appendChild(rfcXml);  }    if(typeof(payload.statusId) !== 'undefined'){    var statusXml = &lt;dat:P_STATUS_ID xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.statusId}&lt;/dat:P_STATUS_ID&gt;;        newPayload.appendChild(statusXml);}   if(typeof(payload.revisado) !== 'undefined'){   var revisadoXml = &lt;dat:P_REVISED xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.revisado}&lt;/dat:P_REVISED&gt;;      newPayload.appendChild(revisadoXml);}    if(typeof(payload.fechaAlta) !== 'undefined'){   var fechaXml = &lt;dat:P_DATE xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.fechaAlta}&lt;/dat:P_DATE&gt;;   newPayload.appendChild(fechaXml);  }mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:consultaHomonimias"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaUltimoNumeroSorteo/{anio}">
        <inSequence>
            <script language="js">var anio = mc.getProperty('uri.var.anio');var newPayload = &lt;dat:consultaUltimoNumeroSorteo xmlns:dat="http://ws.wso2.org/dataservice"&gt;                   &lt;dat:P_YEAR&gt;{anio}&lt;/dat:P_YEAR&gt;                 &lt;/dat:consultaUltimoNumeroSorteo&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:consultaUltimoNumeroSorteo"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" url-mapping="/consultaSorteos">
        <inSequence>
            <script language="js">var newPayload = &lt;dat:consultaSorteos xmlns:dat="http://ws.wso2.org/dataservice" /&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:consultaSorteos"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaSorteo/{idSorteo}">
        <inSequence>
            <script language="js">var idSorteo = mc.getProperty('uri.var.idSorteo');var newPayload = &lt;dat:consultaSorteo xmlns:dat="http://ws.wso2.org/dataservice"&gt;                     &lt;dat:P_DRAWING_ID&gt;{idSorteo}&lt;/dat:P_DRAWING_ID&gt;                 &lt;/dat:consultaSorteo&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:consultaSorteo"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/editarSorteo">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:editarSorteo xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_DRAWING_ID&gt;{payload.idSorteo}&lt;/dat:P_DRAWING_ID&gt;         &lt;dat:P_KEY&gt;{payload.claveSorteo}&lt;/dat:P_KEY&gt;         &lt;dat:P_DESCRIPTION&gt;{payload.descripcionSorteo}&lt;/dat:P_DESCRIPTION&gt;         &lt;dat:P_YEAR&gt;{payload.anio}&lt;/dat:P_YEAR&gt;         &lt;dat:P_STATUS_ID&gt;{payload.idStatus}&lt;/dat:P_STATUS_ID&gt;         &lt;dat:P_ACCOUNT_STATUS&gt;{payload.idStatusCuenta}&lt;/dat:P_ACCOUNT_STATUS&gt;         &lt;dat:P_QUERY_STATUS&gt;{payload.idStatusConsulta}&lt;/dat:P_QUERY_STATUS&gt;         &lt;dat:P_CHANGE_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_CHANGE_USER_ID&gt;         &lt;dat:P_START_DATE&gt;{payload.fechaInicio}&lt;/dat:P_START_DATE&gt;         &lt;dat:P_END_DATE&gt;{payload.fechaFin}&lt;/dat:P_END_DATE&gt;         &lt;dat:P_CREDIT_NUMBER&gt;{payload.numeroCreditos}&lt;/dat:P_CREDIT_NUMBER&gt;      &lt;/dat:editarSorteo&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:editarSorteo"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaCreditoCurp/{curp}">
        <inSequence>
            <script language="js">var curp = mc.getProperty('uri.var.curp');var payload = &lt;dat:consultaCreditoCurp xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_CURP&gt;{curp}&lt;/dat:P_CURP&gt;         &lt;dat:P_STATUS_ID&gt;1&lt;/dat:P_STATUS_ID&gt;      &lt;/dat:consultaCreditoCurp&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaCreditoCurp"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaCreditoDetalle/{idCredito}">
        <inSequence>
            <script language="js">var idCredito= mc.getProperty('uri.var.idCredito');var payload = &lt;dat:consultaCreditoDetalle xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_REQUEST_ID&gt;{idCredito}&lt;/dat:P_REQUEST_ID&gt;      &lt;/dat:consultaCreditoDetalle&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaCreditoDetalle"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaTitularInformacionPrincipal/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaTitularInformacionPrincipal xmlns:dat="http://ws.wso2.org/dataservice"&gt;                 &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;              &lt;/dat:consultaTitularInformacionPrincipal&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaTitularInformacionPrincipal"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaTitularDireccion/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaTitularDireccion xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:consultaTitularDireccion&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaTitularDireccion"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaTitularDireccionAdicional/{idCredito}">
        <inSequence>
            <script language="js">var idCredito = mc.getProperty('uri.var.idCredito');var payload = &lt;dat:consultaTitularDireccionAdicional xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_REQUEST_ID&gt;{idCredito}&lt;/dat:P_REQUEST_ID&gt;      &lt;/dat:consultaTitularDireccionAdicional&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaTitularDireccionAdicional"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaTitularInformacionAdicional/{idCredito}">
        <inSequence>
            <script language="js">var idCredito = mc.getProperty('uri.var.idCredito');var payload = &lt;dat:consultaTitularInformacionAdicional xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_REQUEST_ID&gt;{idCredito}&lt;/dat:P_REQUEST_ID&gt;      &lt;/dat:consultaTitularInformacionAdicional&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaTitularInformacionAdicional"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaTitularDependencias/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaTitularDependencias xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:consultaTitularDependencias&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaTitularDependencias"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <script language="js">var payload = mc.getPayloadXML();</script>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <filter xmlns:dat="http://ws.wso2.org/dataservice" xpath="count(//dat:dependencia) = 1">
                <then>
                    <script language="js">var payload = mc.getPayloadXML();       var consultaTitularDependenciasResponse = {        "consultaTitularDependenciasResponse" : {          dependencia : []         }       };       var i = 0; for each(var aXML in payload..*::dependencia){       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i] = {};       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Icp = aXML.*::Icp.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Dependencia = aXML.*::Dependencia.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Calle = aXML.*::Calle.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Colonia = aXML.*::Colonia.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].CP = aXML.*::CP.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].MunicipioId = aXML.*::MunicipioId.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Municipio = aXML.*::Municipio.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].EstadoId = aXML.*::EstadoId.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Estado = aXML.*::Estado.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Lada = aXML.*::Lada.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Telefono = aXML.*::Telefono.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Sindicato = aXML.*::Sindicato.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].SeccionId = aXML.*::SeccionId.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Seccion = aXML.*::Seccion.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].NombramientoId = aXML.*::NombramientoId.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].Nombramiento = aXML.*::Nombramiento.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].SueldoBaseMensual = aXML.*::SueldoBaseMensual.toString();       consultaTitularDependenciasResponse.consultaTitularDependenciasResponse.dependencia[i].BimestresCotizados = aXML.*::BimestresCotizados.toString();       i++;       }      mc.setPayloadJSON(consultaTitularDependenciasResponse);</script>
                </then>
            </filter>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaTitularCotizacionFoviissste/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaTitularCotizacionFoviissste xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:consultaTitularCotizacionFoviissste&gt;;   mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaTitularCotizacionFoviissste"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaConyugeInformacion/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaConyugeInformacion xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:consultaConyugeInformacion&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaConyugeInformacion"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaConyugeDependecias/{idPersona}">
        <inSequence>
            <script language="js">var idPersona  = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaConyugeDependecias xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:consultaConyugeDependecias&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaConyugeDependecias"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizacionTitular">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizacionTitular xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_SINGLE_MOTHER_ID&gt;{payload.madreSolteraId}&lt;/dat:P_SINGLE_MOTHER_ID&gt;         &lt;dat:P_LADA_CODE&gt;{payload.lada}&lt;/dat:P_LADA_CODE&gt;         &lt;dat:P_PHONE_NUMBER&gt;{payload.numeroTelefonico}&lt;/dat:P_PHONE_NUMBER&gt;         &lt;dat:P_MOBILE_PHONE&gt;{payload.numeroCelular}&lt;/dat:P_MOBILE_PHONE&gt;         &lt;dat:P_EMAIL&gt;{payload.correoElectronico}&lt;/dat:P_EMAIL&gt;         &lt;dat:P_CIVIL_STATUS_ID&gt;{payload.estadoCivilId}&lt;/dat:P_CIVIL_STATUS_ID&gt;         &lt;dat:P_MAX_AMOUNT_REACH_PESOS&gt;{payload.montoMaximoAlcanzadoPesos}&lt;/dat:P_MAX_AMOUNT_REACH_PESOS&gt;         &lt;dat:P_MAX_AMT_REACH_MIN_SAL&gt;{payload.montoMaximoAlcanzadoSalariosMinimos}&lt;/dat:P_MAX_AMT_REACH_MIN_SAL&gt;         &lt;dat:P_BALANCE&gt;{payload.saldoSar}&lt;/dat:P_BALANCE&gt;         &lt;dat:P_MAX_AMT_TOTAL&gt;{payload.montoMaximoTotal}&lt;/dat:P_MAX_AMT_TOTAL&gt;         &lt;dat:P_SALARY_LEVEL&gt;{payload.nivelSalarial}&lt;/dat:P_SALARY_LEVEL&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:actualizacionTitular&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizacionTitular"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizacionCredito">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizacionCredito xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_REQUEST_TYPE_ID&gt;{payload.idTipoSolicitud}&lt;/dat:P_REQUEST_TYPE_ID&gt;         &lt;dat:P_MUNICIPALITY_ID&gt;{payload.idMunicipio}&lt;/dat:P_MUNICIPALITY_ID&gt;         &lt;dat:P_ADQ_TYPE_ID&gt;{payload.tipoAdquisicionId}&lt;/dat:P_ADQ_TYPE_ID&gt;         &lt;dat:P_CREDIT_LINE&gt;{payload.lineaCreditoId}&lt;/dat:P_CREDIT_LINE&gt;         &lt;dat:P_MAX_AMT_REACHED&gt;{payload.montoMaximoAlcanzadoPesos}&lt;/dat:P_MAX_AMT_REACHED&gt;         &lt;dat:P_MAX_AMT_REACH_MIN_SAL&gt;{payload.montoMaximoAlcanzadoSalariosMinimos}&lt;/dat:P_MAX_AMT_REACH_MIN_SAL&gt;         &lt;dat:P_SAR_BALANCE&gt;{payload.saldoSar}&lt;/dat:P_SAR_BALANCE&gt;         &lt;dat:P_MAX_TOTAL_AMT&gt;{payload.montoMaximoTotal}&lt;/dat:P_MAX_TOTAL_AMT&gt;         &lt;dat:P_MIN_SAL_VALUE&gt;{payload.valorSalarioMinimo}&lt;/dat:P_MIN_SAL_VALUE&gt;         &lt;dat:P_HOUSING_TYPE_ID&gt;{payload.tipoViviendaId}&lt;/dat:P_HOUSING_TYPE_ID&gt;         &lt;dat:P_HOMO_RFC_BLOCK&gt;{payload.posibleHomonimiaRfcBloqueado}&lt;/dat:P_HOMO_RFC_BLOCK&gt;         &lt;dat:P_HOMO_DRAW&gt;{payload.posibleHomonimiaSorteos}&lt;/dat:P_HOMO_DRAW&gt;         &lt;dat:P_HOMO_ORIGIN&gt;{payload.posibleHomonimiaOriginacion}&lt;/dat:P_HOMO_ORIGIN&gt;         &lt;dat:P_HOMO_PORTFOLIO&gt;{payload.posibleHomonimiaCartera}&lt;/dat:P_HOMO_PORTFOLIO&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_REQUEST_ID&gt;{payload.idCredito}&lt;/dat:P_REQUEST_ID&gt;      &lt;/dat:actualizacionCredito&gt;;if(typeof(payload.tipoConstruccionLetra) !== 'undefined'){    var tipoConstruccionLetraXml = &lt;dat:P_CONSTR_TYPE xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.tipoConstruccionLetra}&lt;/dat:P_CONSTR_TYPE&gt;;   newPayload.appendChild(tipoConstruccionLetraXml);}mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizacionCredito"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizacionDireccion">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizaDireccionTitular xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_MUNICIPALITY_ID&gt;{payload.idMunicipio}&lt;/dat:P_MUNICIPALITY_ID&gt;         &lt;dat:P_STREET&gt;{payload.calle}&lt;/dat:P_STREET&gt;         &lt;dat:P_EXT_NUMBER&gt;{payload.numeroExterior}&lt;/dat:P_EXT_NUMBER&gt;         &lt;dat:P_INT_NUMBER&gt;{payload.numeroInterior}&lt;/dat:P_INT_NUMBER&gt;         &lt;dat:P_ZIP&gt;{payload.codigoPostal}&lt;/dat:P_ZIP&gt;         &lt;dat:P_NEIGHBORHOOD&gt;{payload.colonia}&lt;/dat:P_NEIGHBORHOOD&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:actualizaDireccionTitular&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizaDireccionTitular"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaDependencia/{IdIcp}">
        <inSequence>
            <script language="js">var IdIcp = mc.getProperty('uri.var.IdIcp');var payload = &lt;dat:consultaDependenciaId xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{IdIcp}&lt;/dat:P_DEPENDENCY_ID&gt;      &lt;/dat:consultaDependenciaId&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaDependenciaId"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="POST" url-mapping="/insertaBitocora">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:InsertaBitacora xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:N_Curp&gt;{payload.CURP}&lt;/dat:N_Curp&gt;         &lt;dat:N_IPInt&gt;{payload.ipInt}&lt;/dat:N_IPInt&gt;         &lt;dat:N_IPPub&gt;{payload.ipPub}&lt;/dat:N_IPPub&gt;         &lt;dat:N_Host&gt;{payload.host}&lt;/dat:N_Host&gt;         &lt;dat:N_MAC&gt;{payload.Mac}&lt;/dat:N_MAC&gt;      &lt;/dat:InsertaBitacora&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:InsertaBitacora"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaCoordinador/{coordinadorId}/{nombramientoId}">
        <inSequence>
            <script language="js">var coordinadorId = mc.getProperty('uri.var.coordinadorId');var nombramientoId = mc.getProperty('uri.var.nombramientoId');var payload =&lt;dat:ConsultaCoordinador xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_COORDINATOR_ID&gt;{coordinadorId}&lt;/dat:P_COORDINATOR_ID&gt;     &lt;dat:P_NOMBRAMIENTO_ID&gt;{nombramientoId}&lt;/dat:P_NOMBRAMIENTO_ID&gt;     &lt;/dat:ConsultaCoordinador&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:ConsultaCoordinador"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaSeccionDomicilio/{IdIcp}">
        <inSequence>
            <script language="js">var idIcp = mc.getProperty('uri.var.IdIcp');var payload =&lt;dat:consultaSeccionDomicilio xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{idIcp}&lt;/dat:P_DEPENDENCY_ID&gt;      &lt;/dat:consultaSeccionDomicilio&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaSeccionDomicilio"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizaMunicipioSorteo">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizaMunicipioSorteo xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{payload.IdIcp}&lt;/dat:P_DEPENDENCY_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:actualizaMunicipioSorteo&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizaMunicipioSorteo"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizaInformacionAdicional">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizaInformacionAdicional xmlns:dat="http://ws.wso2.org/dataservice"&gt;      &lt;dat:P_FAMILY_MEMBERS&gt;{payload.integrantesFamilia}&lt;/dat:P_FAMILY_MEMBERS&gt;      &lt;dat:P_AUTH_FOVISSSTE&gt;{payload.autorizacionFovissste}&lt;/dat:P_AUTH_FOVISSSTE&gt;      &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;      &lt;dat:P_REQUEST_ID&gt;{payload.idCredito}&lt;/dat:P_REQUEST_ID&gt;      &lt;/dat:actualizaInformacionAdicional&gt;;if(typeof(payload.familiarDiscapacitado) !== 'undefined'){  var familiarDiscapacitadoXml = &lt;dat:P_HANDYCAPPED xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.familiarDiscapacitado}&lt;/dat:P_HANDYCAPPED&gt;; newPayload.appendChild(familiarDiscapacitadoXml);}if(typeof(payload.gradoEscolarId) !== 'undefined'){  var gradoEscolarIdXml = &lt;dat:P_SCHOLAR_GRADE xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.gradoEscolarId}&lt;/dat:P_SCHOLAR_GRADE&gt;; newPayload.appendChild(gradoEscolarIdXml);}if(typeof(payload.derechoHabDiscapacitado) !== 'undefined'){  var derechoHabDiscapacitadoXml = &lt;dat:P_HANDYCAPPED_ME xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.derechoHabDiscapacitado}&lt;/dat:P_HANDYCAPPED_ME&gt;; newPayload.appendChild(derechoHabDiscapacitadoXml);}mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizaInformacionAdicional"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizaDatosLaboralesPrincipalesTitular">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizaDatosLaboralesPrincipalesTitular xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NOMBRAMIENTO_ID&gt;{payload.nombramientoId}&lt;/dat:P_NOMBRAMIENTO_ID&gt;         &lt;dat:P_BASE_SALARY&gt;{payload.sueldoBasico}&lt;/dat:P_BASE_SALARY&gt;         &lt;dat:P_PERIOD&gt;{payload.bimestresCotizados}&lt;/dat:P_PERIOD&gt;         &lt;dat:P_DESC_UNION&gt;{payload.sindicato}&lt;/dat:P_DESC_UNION&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{payload.IdIcp}&lt;/dat:P_DEPENDENCY_ID&gt;         &lt;dat:P_COORD_NOMBRAM_ID&gt;{payload.coordinadorNombramientoId}&lt;/dat:P_COORD_NOMBRAM_ID&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;   &lt;/dat:actualizaDatosLaboralesPrincipalesTitular&gt;;      if(typeof(payload.seccionId) !== 'undefined'){  var seccionIdXml = &lt;dat:P_SECTION_ID xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.seccionId}&lt;/dat:P_SECTION_ID&gt;; newPayload.appendChild(seccionIdXml);}if(typeof(payload.estadoId) !== 'undefined'){  var estadoIdXml = &lt;dat:P_STATE_ID xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.estadoId}&lt;/dat:P_STATE_ID&gt;; newPayload.appendChild(estadoIdXml);}mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizaDatosLaboralesPrincipalesTitular"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaSegundaDependecia/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaSegundaDependecia xmlns:dat="http://ws.wso2.org/dataservice"&gt;    &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;       &lt;/dat:consultaSegundaDependecia&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaSegundaDependecia"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizaSegundaDependecia">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload =&lt;dat:actualizaSegundaDependecia xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NOMBRAMIENTO_ID&gt;{payload.nombramientoId}&lt;/dat:P_NOMBRAMIENTO_ID&gt;         &lt;dat:P_BASE_SALARY&gt;{payload.sueldoBasico}&lt;/dat:P_BASE_SALARY&gt;         &lt;dat:P_PERIOD&gt;{payload.bimestresCotizados}&lt;/dat:P_PERIOD&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{payload.IdIcp}&lt;/dat:P_DEPENDENCY_ID&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:actualizaSegundaDependecia&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizaSegundaDependecia"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="POST" url-mapping="/insertaSegundaDependencia">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload =&lt;dat:insertaSegundaDependencia xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NOMBRAMIENTO_ID&gt;{payload.nombramientoId}&lt;/dat:P_NOMBRAMIENTO_ID&gt;         &lt;dat:P_BASE_SALARY&gt;{payload.sueldoBasico}&lt;/dat:P_BASE_SALARY&gt;         &lt;dat:P_PERIOD&gt;{payload.bimestresCotizados}&lt;/dat:P_PERIOD&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{payload.IdIcp}&lt;/dat:P_DEPENDENCY_ID&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:insertaSegundaDependencia&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:insertaSegundaDependencia"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
    </resource>
    <resource methods="DELETE" uri-template="/eliminarSegundaDependencia/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:eliminarSegundaDependencia xmlns:dat="http://ws.wso2.org/dataservice"&gt;   &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;       &lt;/dat:eliminarSegundaDependencia&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:eliminarSegundaDependencia"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaConyuge/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaConyuge xmlns:dat="http://ws.wso2.org/dataservice"&gt;  &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;       &lt;/dat:consultaConyuge&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaConyuge"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizacionConyuge">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizacionConyuge xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_GENRE_ID&gt;{payload.generoId}&lt;/dat:P_GENRE_ID&gt;         &lt;dat:P_NAME&gt;{payload.nombre}&lt;/dat:P_NAME&gt;         &lt;dat:P_FATHER_LAST_NAME&gt;{payload.apellidoPaterno}&lt;/dat:P_FATHER_LAST_NAME&gt;         &lt;dat:P_MOTHER_LAST_NAME&gt;{payload.apellidoMaterno}&lt;/dat:P_MOTHER_LAST_NAME&gt;         &lt;dat:P_RFC&gt;{payload.rfc}&lt;/dat:P_RFC&gt;         &lt;dat:P_BIRTH_DATE&gt;{payload.fechaNacimiento}&lt;/dat:P_BIRTH_DATE&gt;         &lt;dat:P_MAX_AMT_REACHED&gt;{payload.montoMaximoAlcanzadoPesos}&lt;/dat:P_MAX_AMT_REACHED&gt;         &lt;dat:P_MAX_AMT_REACHED_MIN_SAL&gt;{payload.montoMaximoAlcanzadoSalariosMinimos}&lt;/dat:P_MAX_AMT_REACHED_MIN_SAL&gt;         &lt;dat:P_SAR_BALANCE&gt;{payload.saldoSar}&lt;/dat:P_SAR_BALANCE&gt;         &lt;dat:P_MAX_TOTAL_AMT&gt;{payload.montoMaximoTotal}&lt;/dat:P_MAX_TOTAL_AMT&gt;         &lt;dat:P_INFONAVIT_QUOTE&gt;{payload.cotizaInfonavit}&lt;/dat:P_INFONAVIT_QUOTE&gt;         &lt;dat:P_MARRIAGE_ACT&gt;{payload.actaMatrimonio}&lt;/dat:P_MARRIAGE_ACT&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersonaTitular}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:actualizacionConyuge&gt;;if(typeof(payload.curp) !== 'undefined'){  var curpXml = &lt;dat:P_CURP xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.curp}&lt;/dat:P_CURP&gt;; newPayload.appendChild(curpXml);}if(typeof(payload.origen) !== 'undefined'){  var origenXml = &lt;dat:P_ORIGIN xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.origen}&lt;/dat:P_ORIGIN&gt;; newPayload.appendChild(origenXml);}if(typeof(payload.numeroSeguridadSocial) !== 'undefined'){  var numeroSeguridadSocialXml = &lt;dat:P_SOCIAL_SEC_NO xmlns:dat="http://ws.wso2.org/dataservice"&gt;{payload.numeroSeguridadSocial}&lt;/dat:P_SOCIAL_SEC_NO&gt;; newPayload.appendChild(numeroSeguridadSocialXml);}mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizacionConyuge"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/actualizaDatosLaboralesConyuge">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizaDatosLaboralesConyuge xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NOMBRAMIENTO_ID&gt;{payload.nombramientoId}&lt;/dat:P_NOMBRAMIENTO_ID&gt;         &lt;dat:P_BASE_SALARY&gt;{payload.sueldoBasico}&lt;/dat:P_BASE_SALARY&gt;         &lt;dat:P_PERIOD&gt;{payload.bimestresCotizados}&lt;/dat:P_PERIOD&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{payload.IdIcp}&lt;/dat:P_DEPENDENCY_ID&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:actualizaDatosLaboralesConyuge&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizaDatosLaboralesConyuge"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="POST" url-mapping="/insertaDatosLaboralesConyuge">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:insertaDatosLaboralesConyuge xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NOMBRAMIENTO_ID&gt;{payload.nombramientoId}&lt;/dat:P_NOMBRAMIENTO_ID&gt;         &lt;dat:P_BASE_SALARY&gt;{payload.sueldoBasico}&lt;/dat:P_BASE_SALARY&gt;         &lt;dat:P_PERIOD&gt;{payload.bimestresCotizados}&lt;/dat:P_PERIOD&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{payload.IdIcp}&lt;/dat:P_DEPENDENCY_ID&gt;         &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;         &lt;dat:P_PERSON_ID&gt;{payload.idPersona}&lt;/dat:P_PERSON_ID&gt;      &lt;/dat:insertaDatosLaboralesConyuge&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:insertaDatosLaboralesConyuge"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" uri-template="/actualizacionSolictud/{idCredito}">
        <inSequence>
            <script language="js">var idCredito = mc.getProperty('uri.var.idCredito');var payload = &lt;dat:actualizacionSolictud xmlns:dat="http://ws.wso2.org/dataservice"&gt;  &lt;dat:P_REQUEST_ID&gt;{idCredito}&lt;/dat:P_REQUEST_ID&gt;       &lt;/dat:actualizacionSolictud&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:actualizacionSolictud"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="DELETE" uri-template="/eliminarDatosLaboralesConyuge/{idPersonaTitular}">
        <inSequence>
            <script language="js">var idPersonaTitular = mc.getProperty('uri.var.idPersonaTitular');var payload = &lt;dat:eliminarDatosLaboralesConyuge xmlns:dat="http://ws.wso2.org/dataservice"&gt;  &lt;dat:P_MAIN_PERSON_ID&gt;{idPersonaTitular}&lt;/dat:P_MAIN_PERSON_ID&gt;       &lt;/dat:eliminarDatosLaboralesConyuge&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:eliminarDatosLaboralesConyuge"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="DELETE" uri-template="/eliminarConyuge/{idPersona}">
        <inSequence>
            <script language="js">var idPersona = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:eliminarConyuge xmlns:dat="http://ws.wso2.org/dataservice"&gt;    &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;       &lt;/dat:eliminarConyuge&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:eliminarConyuge"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" uri-template="/actualizacionSolictudNoProcesar">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:actualizacionSolictudNoProcesar xmlns:dat="http://ws.wso2.org/dataservice"&gt;   &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;   &lt;dat:P_REQUEST_ID&gt;{payload.idCredito}&lt;/dat:P_REQUEST_ID&gt;   &lt;/dat:actualizacionSolictudNoProcesar&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:actualizacionSolictudNoProcesar"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/recalculoPuntosEstado">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:recalculoPuntosEstado xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NO_SOLICITUD&gt;{payload.noSolicitud}&lt;/dat:P_NO_SOLICITUD&gt;         &lt;dat:P_ESTADO&gt;{payload.estado}&lt;/dat:P_ESTADO&gt;      &lt;/dat:recalculoPuntosEstado&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:recalculoPuntosEstado"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/recalculoPuntosBimestre">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:recalculoPuntosBimestre xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NO_SOLICITUD&gt;{payload.noSolicitud}&lt;/dat:P_NO_SOLICITUD&gt;         &lt;dat:P_BIMESTRE&gt;{payload.bimestresCotizados}&lt;/dat:P_BIMESTRE&gt;      &lt;/dat:recalculoPuntosBimestre&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:recalculoPuntosBimestre"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="PUT" url-mapping="/recalculoPuntosFamilia">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:recalculoPuntosFamilia xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_NO_SOLICITUD&gt;{payload.noSolicitud}&lt;/dat:P_NO_SOLICITUD&gt;         &lt;dat:P_FAMILIA&gt;{payload.integrantesFamilia}&lt;/dat:P_FAMILIA&gt;      &lt;/dat:recalculoPuntosFamilia&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:recalculoPuntosFamilia"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaTipoCreditoSolicitud/{idCredito}">
        <inSequence>
            <script language="js">var idCredito = mc.getProperty('uri.var.idCredito');var payload = &lt;dat:consultaTipoCreditoSolicitud xmlns:dat="http://ws.wso2.org/dataservice"&gt;  &lt;dat:P_REQUEST_ID&gt;{idCredito}&lt;/dat:P_REQUEST_ID&gt;       &lt;/dat:consultaTipoCreditoSolicitud&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaTipoCreditoSolicitud"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="POST" url-mapping="/insertarConyuge">
        <inSequence>
            <script language="js">var payload = mc.getPayloadJSON();var newPayload = &lt;dat:insertarConyuge xmlns:dat="http://ws.wso2.org/dataservice"&gt;      &lt;dat:P_MAIN_PERSON_ID&gt;{payload.idTitular}&lt;/dat:P_MAIN_PERSON_ID&gt;      &lt;dat:P_GENRE_ID&gt;{payload.generoId}&lt;/dat:P_GENRE_ID&gt;      &lt;dat:P_SINGLE_MOTHER_ID&gt;{payload.madreSolteraId}&lt;/dat:P_SINGLE_MOTHER_ID&gt;      &lt;dat:P_NAME&gt;{payload.nombre}&lt;/dat:P_NAME&gt;      &lt;dat:P_FATHER_LAST_NAME&gt;{payload.apellidoPaterno}&lt;/dat:P_FATHER_LAST_NAME&gt;      &lt;dat:P_MOTHER_LAST_NAME&gt;{payload.apellidoMaterno}&lt;/dat:P_MOTHER_LAST_NAME&gt;      &lt;dat:P_RFC&gt;{payload.rfc}&lt;/dat:P_RFC&gt;      &lt;dat:P_CURP&gt;{payload.curp}&lt;/dat:P_CURP&gt;      &lt;dat:P_BIRTH_DATE&gt;{payload.fechaNacimiento}&lt;/dat:P_BIRTH_DATE&gt;      &lt;dat:P_MAX_AMT_REACHED&gt;{payload.montoMaximoAlcanzadoPesos}&lt;/dat:P_MAX_AMT_REACHED&gt;      &lt;dat:P_MAX_AMT_REACH_MIN_SAL&gt;{payload.montoMaximoAlcanzadoSalariosMinimos}&lt;/dat:P_MAX_AMT_REACH_MIN_SAL&gt;      &lt;dat:P_SAR_BALANCE&gt;{payload.saldoSar}&lt;/dat:P_SAR_BALANCE&gt;      &lt;dat:P_MAX_TOTAL_AMT&gt;{payload.montoMaximoTotal}&lt;/dat:P_MAX_TOTAL_AMT&gt;      &lt;dat:P_INFONAVIT_QUOTE&gt;1&lt;/dat:P_INFONAVIT_QUOTE&gt;      &lt;dat:P_SOCIAL_SEC_NO&gt;{payload.numeroSeguroSocila}&lt;/dat:P_SOCIAL_SEC_NO&gt;      &lt;dat:P_MARRIAGE_ACT&gt;1&lt;/dat:P_MARRIAGE_ACT&gt;      &lt;dat:P_ORIGIN&gt;{payload.origen}&lt;/dat:P_ORIGIN&gt;      &lt;dat:P_USER_ID&gt;{payload.idUsuario}&lt;/dat:P_USER_ID&gt;      &lt;/dat:insertarConyuge&gt;;mc.setPayloadXML(newPayload);</script>
            <header name="Action" scope="default" value="urn:insertarConyuge"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/consultaConyugeId/{idPersona}">
        <inSequence>
            <script language="js">var idPersona  = mc.getProperty('uri.var.idPersona');var payload = &lt;dat:consultaConyugeId xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_PERSON_ID&gt;{idPersona}&lt;/dat:P_PERSON_ID&gt;     &lt;/dat:consultaConyugeId&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaConyugeId"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" url-mapping="/consultaSorteoActivo">
        <inSequence>
            <script language="js">var payload = &lt;dat:consultaSorteoActivo xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_STATE_ID&gt;1&lt;/dat:P_STATE_ID&gt;      &lt;/dat:consultaSorteoActivo&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:consultaSorteoActivo"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/validaCreditoSorteoCurp/{idSorteo}/{curp}">
        <inSequence>
            <script language="js">var idSorteo = mc.getProperty('uri.var.idSorteo');var curp = mc.getProperty('uri.var.curp');var payload = &lt;dat:validaCreditoSorteoCurp xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_DRAWING_ID&gt;{idSorteo}&lt;/dat:P_DRAWING_ID&gt;     &lt;dat:P_CURP&gt;{curp}&lt;/dat:P_CURP&gt;     &lt;/dat:validaCreditoSorteoCurp&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:validaCreditoSorteoCurp"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoCodigoArea/{idEstado}">
        <inSequence>
            <script language="js">var idEstado = mc.getProperty('uri.var.idEstado');var payload = &lt;dat:catalogoCodigoArea xmlns:dat="http://ws.wso2.org/dataservice"&gt;  &lt;dat:P_STATE_ID&gt;{idEstado}&lt;/dat:P_STATE_ID&gt;       &lt;/dat:catalogoCodigoArea&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoCodigoArea"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" url-mapping="/catalogoDesignacion">
        <inSequence>
            <script language="js">var payload = &lt;dat:catalogoDesignacion xmlns:dat="http://ws.wso2.org/dataservice"/&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoDesignacion"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" url-mapping="/catalogoGenero">
        <inSequence>
            <script language="js">var payload = &lt;dat:catalogoGenero xmlns:dat="http://ws.wso2.org/dataservice"/&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoGenero"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" url-mapping="/catalogoGradosEscolares">
        <inSequence>
            <script language="js">var payload = &lt;dat:catalogoGradosEscolares xmlns:dat="http://ws.wso2.org/dataservice"/&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoGradosEscolares"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" url-mapping="/catalogoTipoSolicitud">
        <inSequence>
            <script language="js">var payload = &lt;dat:catalogoTipoSolicitud xmlns:dat="http://ws.wso2.org/dataservice"/&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoTipoSolicitud"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoTipoCasaByTipoSolicitud/{idLineaCredito}">
        <inSequence>
            <script language="js">var idLineaCredito = mc.getProperty('uri.var.idLineaCredito');var payload = &lt;dat:catalogoLineaCredito xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_CREDIT_LINE_ID&gt;{idLineaCredito}&lt;/dat:P_CREDIT_LINE_ID&gt;     &lt;/dat:catalogoLineaCredito&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoLineaCredito"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoLineasCredito/{idTipoAdquision}">
        <inSequence>
            <script language="js">var idTipoAdquision = mc.getProperty('uri.var.idTipoAdquision');var payload = &lt;dat:catalogoLineasCredito xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_APPLY_DRAWING&gt;1&lt;/dat:P_APPLY_DRAWING&gt;     &lt;dat:P_ADQUISITION_TYPE&gt;{idTipoAdquision}&lt;/dat:P_ADQUISITION_TYPE&gt;     &lt;/dat:catalogoLineasCredito&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoLineasCredito"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <script language="js">var payload = mc.getPayloadXML();</script>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <filter xmlns:dat="http://ws.wso2.org/dataservice" xpath="count(//dat:catalogo) = 1">
                <then>
                    <script language="js">var payload = mc.getPayloadXML();             var catalogoLineasCreditoResponse = {               "catalogoLineasCreditoResponse" :         {                  catalogo : []                 }              };              var i = 0; for each(var aXML in payload..*::catalogo){        catalogoLineasCreditoResponse.catalogoLineasCreditoResponse.catalogo[i] = {};        catalogoLineasCreditoResponse.catalogoLineasCreditoResponse.catalogo[i].id = aXML.*::id.toString();        catalogoLineasCreditoResponse.catalogoLineasCreditoResponse.catalogo[i].descripcion = aXML.*::descripcion.toString();        i++;              }            mc.setPayloadJSON(catalogoLineasCreditoResponse);</script>
                </then>
            </filter>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoDependencia/{idICP}">
        <inSequence>
            <script language="js">var idICP = mc.getProperty('uri.var.idICP');idICP = parseInt(idICP); print(idICP);if(idICP  === 0){ idICP = '';}var payload = &lt;dat:catalogoDependencia xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_DEPENDENCY_ID&gt;{idICP}&lt;/dat:P_DEPENDENCY_ID&gt;     &lt;dat:P_APPLY_DRAWING_ID&gt;1&lt;/dat:P_APPLY_DRAWING_ID&gt;     &lt;/dat:catalogoDependencia&gt;;mc.setPayloadXML(payload);</script>
            <log level="full"/>
            <header name="Action" scope="default" value="urn:catalogoDependencia"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <filter xmlns:dat="http://ws.wso2.org/dataservice" xpath="count(//dat:catalogo) = 1">
                <then>
                    <script language="js">var payload = mc.getPayloadXML();             var catalogoDependenciaResponse = {               "catalogoDependenciaResponse" :         {                  catalogo : []                 }              };              var i = 0; for each(var aXML in payload..*::catalogo){        catalogoDependenciaResponse.catalogoDependenciaResponse.catalogo[i] = {};        catalogoDependenciaResponse.catalogoDependenciaResponse.catalogo[i].id = aXML.*::id.toString();        catalogoDependenciaResponse.catalogoDependenciaResponse.catalogo[i].descripcion = aXML.*::descripcion.toString();        i++;              }            mc.setPayloadJSON(catalogoDependenciaResponse);</script>
                </then>
            </filter>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoDependenciaById/{idICP}">
        <inSequence>
            <script language="js">var idICP = mc.getProperty('uri.var.idICP');idICP = parseInt(idICP);if(idICP  === 0){ idICP = '';}var payload = &lt;dat:catalogoDependenciaById xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{idICP}&lt;/dat:P_DEPENDENCY_ID&gt;      &lt;/dat:catalogoDependenciaById&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoDependenciaById"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <filter xmlns:dat="http://ws.wso2.org/dataservice" xpath="count(//dat:catalogo) = 1">
                <then>
                    <script language="js">var payload = mc.getPayloadXML();             var catalogoDependenciaByIdResponse = {               "catalogoDependenciaByIdResponse" :         {                  catalogo : []                 }              };              var i = 0; for each(var aXML in payload..*::catalogo){        catalogoDependenciaByIdResponse.catalogoDependenciaByIdResponse.catalogo[i] = {};        catalogoDependenciaByIdResponse.catalogoDependenciaByIdResponse.catalogo[i].id = aXML.*::id.toString();        catalogoDependenciaByIdResponse.catalogoDependenciaByIdResponse.catalogo[i].descripcion = aXML.*::descripcion.toString();        i++;              }            mc.setPayloadJSON(catalogoDependenciaByIdResponse);</script>
                </then>
            </filter>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" url-mapping="/catalogoEstados">
        <inSequence>
            <script language="js">var payload = &lt;dat:catalogoEstados xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_DRAW_STATUS&gt;1&lt;/dat:P_DRAW_STATUS&gt;     &lt;/dat:catalogoEstados&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoEstados"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoEstadoByMunicipio/{idMunicipio}">
        <inSequence>
            <script language="js">var idMunicipio = mc.getProperty('uri.var.idMunicipio');var payload = &lt;dat:catalogoEstadoByMunicipio xmlns:dat="http://ws.wso2.org/dataservice"&gt;     &lt;dat:P_MUNICIPALITY_ID&gt;{idMunicipio}&lt;/dat:P_MUNICIPALITY_ID&gt;     &lt;/dat:catalogoEstadoByMunicipio&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoEstadoByMunicipio"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoMunicipioByCodigoPostal/{codigoPostal}">
        <inSequence>
            <script language="js">var codigoPostal = mc.getProperty('uri.var.codigoPostal');var payload = &lt;dat:catalogoMunicipioByCodigoPostal xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_ZIP&gt;{codigoPostal}&lt;/dat:P_ZIP&gt;      &lt;/dat:catalogoMunicipioByCodigoPostal&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoMunicipioByCodigoPostal"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoMunicipio/{idEstado}">
        <inSequence>
            <script language="js">var idEstado = mc.getProperty('uri.var.idEstado');var payload = &lt;dat:catalogoMunicipio xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_STATE&gt;{idEstado}&lt;/dat:P_STATE&gt;      &lt;/dat:catalogoMunicipio&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoMunicipio"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoAplicaSeccionDomicilio/{idICP}">
        <inSequence>
            <script language="js">var idICP = mc.getProperty('uri.var.idICP');var payload = &lt;dat:catalogoAplicaSeccionDomicilio xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_DEPENDENCY_ID&gt;{idICP}&lt;/dat:P_DEPENDENCY_ID&gt;      &lt;/dat:catalogoAplicaSeccionDomicilio&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoAplicaSeccionDomicilio"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
            <send/>
        </outSequence>
    </resource>
    <resource methods="GET" uri-template="/catalogoColonias/{codigoPostal}">
        <inSequence>
            <script language="js">var codigoPostal = mc.getProperty('uri.var.codigoPostal');var payload = &lt;dat:catalogoColonias xmlns:dat="http://ws.wso2.org/dataservice"&gt;         &lt;dat:P_ZIP_CODE&gt;{codigoPostal}&lt;/dat:P_ZIP_CODE&gt;      &lt;/dat:catalogoColonias&gt;;mc.setPayloadXML(payload);</script>
            <header name="Action" scope="default" value="urn:catalogoColonias"/>
            <send>
                <endpoint key="SORTEO"/>
            </send>
        </inSequence>
        <outSequence>
            <property name="messageType" value="application/json" scope="axis2" type="STRING"/>
			<filter xmlns:dat="http://ws.wso2.org/dataservice" xpath="count(//dat:catalogo) = 1">
                <then>
                    <script language="js">
						var payload = mc.getPayloadXML();       
						var catalogoColoniasResponse = {
							"catalogoColoniasResponse" : {
								catalogo : []         
							}      
						};       
						var i = 0; 
						for each(var aXML in payload..*::catalogo){
							catalogoColoniasResponse.catalogoColoniasResponse.catalogo[i] = {};
							catalogoColoniasResponse.catalogoColoniasResponse.catalogo[i].colonia = aXML.*::colonia.toString();
							i++;      
						}      
						mc.setPayloadJSON(catalogoColoniasResponse);</script>
                </then>
            </filter>
            <send/>
        </outSequence>
    </resource>
</api>
